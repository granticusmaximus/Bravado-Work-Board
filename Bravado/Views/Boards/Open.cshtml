@using Bravado.ViewModel.BoardViewModels
@using System.Collections.Generic
@model BoardView

<script>
function allowDrop(ev) {
  ev.preventDefault();
}

function drag(ev) {
  ev.dataTransfer.setData("text", ev.target.id);
}

function drop(ev) {
  ev.preventDefault();
  var data = ev.dataTransfer.getData("text");
  ev.target.appendChild(document.getElementById(data));
}
</script>

@{
ViewData["Title"] = $"{Model.Board.Title}" ;
}
<div class=row>
    <div>
        <a asp-action=Add asp-controller="Tasks" asp-route-id="@Model.Board.Id" class="btn btn-primary"><i class="fa fa-plus-circle" aria-hidden="true"> Add New Task</i></a>
        <a asp-action=Edit asp-route-id="@Model.Board.Id" class="waves-effect waves-light btn"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit</a>
        <a asp-action=Delete asp-route-id="@Model.Board.Id" class="waves-effect waves-light red btn"><i class="fa fa-window-close" aria-hidden="true"></i> Delete</a>
    </div>
</div>

<div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)">
  <img src="img_w3slogo.gif" draggable="true" ondragstart="drag(event)" id="drag1" width="88" height="31">
</div>

<div id="div2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>

<div class="row">
        <div class="col-md-4 flexCol">
                <ul>
                    <li class="boardHeader">
                        <h4>To Do</h4>
                    </li>
                    @foreach (var task in Model.TaskL1)
                    {
                        <li class="collection-item">
                            <div class="card hoverable blue-grey">
                                <div class="card-content white-text activator">
                                    <span class="card-title center-align"><a asp-controller="Tasks" asp-action="Open" asp-route-id="@task.Id" class="white-text"> @task.Title </a></span>
                                    <br>
                                    <span class="card-title center-align">
                                        @if (@task.DaysOverDue > 0)
                                        {
                                            <p bgcolor="#FF0000"><font color="white">@task.DaysOverDue.ToString(@task.DaysOverDue + "Days " + "Overdue")</font></p>
                                        }
                                        else
                                        {
                                            <p>@task.DueDate.ToString("dd-MMM-yyyy") </p>
                                        }
                                    </span>
                                    <br>
                                    <a asp-controller="Tasks" asp-action="Open" asp-route-id="@task.Id" class="waves-effect waves-light btn-small center-align"><i class="fa fa-paper-plane" aria-hidden="true"></i></a>
                                </div>
                                <div class="card-reveal blue-grey white-text">
                                    <span class="card-title white-text text-darken-4 center-align">@task.Title<i class="fa fa-close">close</i></span>
                                    <p class="flow-text">@task.Description</p>
                                    <a asp-controller="Tasks" asp-action="Open" asp-route-id="@task.Id" class="waves-effect waves-light btn-small center-align"><i class="fa fa-paper-plane" aria-hidden="true"></i></a>
                                </div>
                            </div>
                        </li>
                    }
                </ul>
        </div>
        <div class="col-md-4 flexCol">
                <ul>
                    <li class="boardHeader">
                        <h4>In Progress</h4>
                    </li>
                    @foreach (var task in Model.TaskL2)
                    {
                        <li class="collection-item">
                            <div class="card hoverable blue-grey">
                                <div class="card-content white-text activator">
                                    <span class="card-title center-align"><a asp-controller="Tasks" asp-action="Open" asp-route-id="@task.Id" class="white-text"> @task.Title </a></span>
                                    <br>
                                    <span class="card-title center-align">
                                        @if (@task.DaysOverDue > 0)
                                        {
                                            <p bgcolor="#FF0000"><font color="white">@task.DaysOverDue.ToString(@task.DaysOverDue + "Days " + "Overdue")</font></p>
                                        }
                                        else
                                        {
                                            <p>@task.DueDate.ToString("dd-MMM-yyyy") </p>
                                        }
                                    </span>
                                    <br>
                                    <a asp-controller="Tasks" asp-action="Open" asp-route-id="@task.Id" class="waves-effect waves-light btn-small center-align"><i class="fa fa-paper-plane" aria-hidden="true"></i></a>
                                </div>
                                <div class="card-reveal blue-grey white-text">
                                    <span class="card-title white-text text-darken-4 center-align">@task.Title<i class="fa fa-close">close</i></span>
                                    <p class="flow-text">@task.Description</p>
                                    <a asp-controller="Tasks" asp-action="Open" asp-route-id="@task.Id" class="waves-effect waves-light btn-small center-align"><i class="fa fa-paper-plane" aria-hidden="true"></i></a>
                                </div>
                            </div>
                        </li>
                    }
                </ul>
        </div>
        <div class="col-md-4 flexCol">
                <ul>
                    <li class="boardHeader">
                        <h4>Done</h4>
                    </li>
                    @foreach (var task in Model.TaskL3)
                    {
                        <li class="collection-item">
                            <div class="card hoverable blue-grey">
                                <div class="card-content white-text activator">
                                    <span class="card-title center-align"><a asp-controller="Tasks" asp-action="Open" asp-route-id="@task.Id" class="white-text"> @task.Title </a></span>
                                    <br>
                                    <span class="card-title center-align">
                                        @if (@task.DaysOverDue > 0)
                                        {
                                            <p bgcolor="#FF0000 !important"><font color="white">@task.DaysOverDue.ToString(@task.DaysOverDue + "Days " + "Overdue")</font></p>
                                        }
                                        else
                                        {
                                            <p>@task.DueDate.ToString("dd-MMM-yyyy") </p>
                                        }
                                    </span>
                                    <br>
                                    <a asp-controller="Tasks" asp-action="Open" asp-route-id="@task.Id" class="waves-effect waves-light btn-small center-align"><i class="fa fa-paper-plane" aria-hidden="true"></i></a>
                                </div>
                                <div class="card-reveal blue-grey white-text">
                                    <span class="card-title white-text text-darken-4 center-align">@task.Title<i class="fa fa-close">close</i></span>
                                    <p class="flow-text">@task.Description</p>
                                    <a asp-controller="Tasks" asp-action="Open" asp-route-id="@task.Id" class="waves-effect waves-light btn-small center-align"><i class="fa fa-paper-plane" aria-hidden="true"></i></a>
                                </div>
                            </div>
                        </li>
                    }
                </ul>
        </div>
</div>
<br/>
<hr />


